{
  "id": "eso",
  "title": "Ticker Engine Signal Handling",
  "description": "Extend signal detection to support all 8 handoff signal types. Implement signal â†’ awaiting mapping. Update engine loop to continue after handoff signals. Build context with human feedback notes.",
  "notes": "2026-01-14 18:25 - Completed ux4: Added 6 new handoff signal constants (SignalApprovalNeeded, SignalInputNeeded, SignalReviewRequested, SignalContentReview, SignalEscalate, SignalCheckpoint). SignalBlocked kept for backward compatibility. Note: ParseSignals() in signals.go still only detects COMPLETE/EJECT/BLOCKED - a future task will need to extend detection for the new signals.\n2026-01-14 18:32 - Completed vyb: Human feedback notes now included in prompt context. Uses existing GetHumanNotes() from ticks client. Added HumanFeedback []ticks.Note field to IterationContext, fetched in runIteration. Template displays in dedicated section before Instructions. Tests cover with-feedback, nil, and empty-slice cases.\n2026-01-14 18:34 - Completed tps: ParseSignals now detects all 8 signal types using unified pattern map. signalPatterns maps strings to constants, signalPriority defines precedence. Single regex: `\u003cpromise\u003e(\\w+)(?::\\s*(.+?))?\u003c/promise\u003e` handles signals with/without context. All 41 tests pass including 20 new tests for handoff signals.\n2026-01-14 18:38 - Completed t9y: Added signalToAwaiting map (8 entries) and handleSignal method to engine.go:735-774. The method routes signals to awaiting states via ticks.SetAwaiting() and handles COMPLETE signal specially by checking task.Requires field first. Note: The handleSignal method is now implemented but not yet called from the main engine loop - the existing signal handling at line 440+ still uses the old switch-case. A future task may need to wire handleSignal into the main loop or the current design may be intentional (separate signal detection vs task state update).\n2026-01-14 18:41 - Completed dqq: Engine loop now continues to next task after any handoff signal. Key changes: 1) handleSignal method (added in t9y) is now wired into main loop at engine.go:449. 2) All 8 handoff signals (EJECT, BLOCKED, APPROVAL_NEEDED, INPUT_NEEDED, REVIEW_REQUESTED, CONTENT_REVIEW, ESCALATE, CHECKPOINT) trigger SetAwaiting and continue to next task. 3) SignalComplete still ignored with warning. 4) Loop terminates with 'no ready tasks (remaining tasks are blocked or awaiting human)' when no more work available. Budget tracking preserved across handoffs.\n2026-01-14 18:43 - Completed 4zs: Updated prompt.go to document all 8 handoff signals. The 'Handoff Signals' section now has a markdown table with all signals and usage guidance. Added 'Reading Human Feedback' section. Removed the old 'Exit signals' bullet point from Rules since it's now fully covered. Tests updated to verify all 8 signals are in the prompt template. Files modified: internal/engine/prompt.go, internal/engine/prompt_test.go.\n2026-01-14 18:47 - Completed 8zf: Worktree now preserved on handoff signals. Added ShouldCleanupWorktree() and exit reason constants. Engine uses named returns with defer to only cleanup when epic is truly complete. Worktrees persist for awaiting-human, budget limits, interruptions, and stuck detection. Same worktree is reused when resuming after human feedback. Tests verify all cleanup decisions.\n2026-01-14 18:49 - Completed jur: Updated skills/ticker/SKILL.md with comprehensive handoff signal documentation. Added all 8 signal types (COMPLETE, APPROVAL_NEEDED, INPUT_NEEDED, REVIEW_REQUESTED, CONTENT_REVIEW, ESCALATE, CHECKPOINT, EJECT, plus legacy BLOCKED). Added 'When to Use Each Signal' section with detailed guidance, XML format examples, 'Reading Human Feedback' section, and 'Pre-Declared Gates (requires field)' documentation. The skill.md now mirrors the prompt.go handoff documentation for consistency.\n2026-01-14 18:51 - Completed q7j: Added AGENT SIGNALS, TASK FILTERING, and HUMAN WORKFLOW sections to ticker run --help. All 9 signal types documented. Note: --watch flag placeholder in acceptance criteria says 'when implemented' - flag not yet added to CLI so not documented. The help text now matches the format in docs/AGENT_HUMAN_WORKFLOW.md.",
  "status": "closed",
  "priority": 2,
  "type": "epic",
  "owner": "peter@engelbrecht.dk",
  "parent": "zt5",
  "created_by": "peter@engelbrecht.dk",
  "created_at": "2026-01-14T16:11:03.150577Z",
  "updated_at": "2026-01-14T17:51:50.501856Z",
  "closed_at": "2026-01-14T17:51:50.501856Z",
  "closed_reason": "all tasks completed"
}