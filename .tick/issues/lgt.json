{
  "id": "lgt",
  "title": "Create worktree package with WorktreeManager",
  "description": "Create the foundational `internal/worktree/` package with WorktreeManager for git worktree operations.\n\n## Files to Create\n\n### internal/worktree/doc.go\n\nPackage documentation explaining worktree management for parallel epic execution.\n\n### internal/worktree/worktree.go\n\n```go\n// Worktree represents an active git worktree.\ntype Worktree struct {\n    Path     string    // Absolute path to worktree directory\n    Branch   string    // Branch name (e.g., ticker/abc123)\n    EpicID   string    // Associated epic ID\n    Created  time.Time // When worktree was created\n}\n\n// Manager handles git worktree lifecycle.\ntype Manager struct {\n    repoRoot     string // Root of main repository\n    worktreeDir  string // Base directory for worktrees (default: .worktrees)\n}\n\n// NewManager creates a worktree manager for the given repository.\n// Returns error if not a git repository.\nfunc NewManager(repoRoot string) (*Manager, error)\n\n// Create creates a new worktree for an epic.\n// Branch name: ticker/\u003cepic-id\u003e\n// Path: \u003crepoRoot\u003e/.worktrees/\u003cepic-id\u003e\n// Creates branch from current HEAD if it doesn't exist.\nfunc (m *Manager) Create(epicID string) (*Worktree, error)\n\n// Remove deletes a worktree and its branch.\n// Force removes even if there are uncommitted changes.\nfunc (m *Manager) Remove(epicID string) error\n\n// Get returns the worktree for an epic, or nil if not exists.\nfunc (m *Manager) Get(epicID string) (*Worktree, error)\n\n// List returns all active ticker worktrees.\nfunc (m *Manager) List() ([]*Worktree, error)\n\n// Exists checks if a worktree exists for the epic.\nfunc (m *Manager) Exists(epicID string) bool\n```\n\n## Git Commands Used\n\n- `git worktree add \u003cpath\u003e -b \u003cbranch\u003e` - Create worktree with new branch\n- `git worktree add \u003cpath\u003e \u003cbranch\u003e` - Create worktree with existing branch\n- `git worktree remove \u003cpath\u003e --force` - Remove worktree\n- `git worktree list --porcelain` - List worktrees (parseable format)\n- `git branch -D \u003cbranch\u003e` - Delete branch after worktree removal\n\n## Implementation Notes\n\n- Worktree directory: `\u003crepo\u003e/.worktrees/\u003cepic-id\u003e/`\n- Branch naming: `ticker/\u003cepic-id\u003e` (e.g., `ticker/abc123`)\n- Branch created from current HEAD (usually main)\n- Use exec.Command for git operations\n- Parse `git worktree list --porcelain` output for List()\n- Handle case where branch already exists (reuse it)\n- Handle case where worktree path already exists (error or clean?)\n\n### internal/worktree/worktree_test.go\n- Test Create in clean repo\n- Test Create with existing branch (reuse)\n- Test Remove cleans up worktree and branch\n- Test List returns all ticker worktrees\n- Test Get returns correct worktree\n- Test Exists\n- Use temp git repos for isolation",
  "status": "closed",
  "priority": 1,
  "type": "task",
  "owner": "peter@engelbrecht.dk",
  "parent": "8my",
  "acceptance_criteria": "1. internal/worktree/ package exists and compiles\n2. Manager.Create() creates worktree at .worktrees/\u003cepic-id\u003e/\n3. Manager.Create() creates branch ticker/\u003cepic-id\u003e from HEAD\n4. Manager.Remove() deletes worktree and branch\n5. Manager.List() returns all ticker/* worktrees\n6. Manager.Get() returns specific worktree or nil\n7. Manager.Exists() correctly detects worktree presence\n8. All operations handle edge cases (existing branch, missing worktree)\n9. All unit tests pass with isolated temp repos",
  "created_by": "peter@engelbrecht.dk",
  "created_at": "2026-01-12T10:00:24.352047Z",
  "updated_at": "2026-01-12T10:14:39.876277Z",
  "closed_at": "2026-01-12T10:14:39.876277Z",
  "closed_reason": "WorktreeManager implementation complete - internal/worktree/ package with Create, Remove, Get, List, Exists methods. Uses ticker/\u003cepic-id\u003e branch naming. All 8 test cases pass."
}