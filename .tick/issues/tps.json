{
  "id": "tps",
  "title": "Update ParseSignals to detect all handoff signals",
  "description": "Update the signal parsing logic in internal/engine/signals.go:\n\n```go\n// signalPatterns maps signal strings to Signal constants\nvar signalPatterns = map[string]Signal{\n    \"COMPLETE\":         SignalComplete,\n    \"EJECT\":            SignalEject,\n    \"BLOCKED\":          SignalBlocked,\n    \"APPROVAL_NEEDED\":  SignalApprovalNeeded,\n    \"INPUT_NEEDED\":     SignalInputNeeded,\n    \"REVIEW_REQUESTED\": SignalReviewRequested,\n    \"CONTENT_REVIEW\":   SignalContentReview,\n    \"ESCALATE\":         SignalEscalate,\n    \"CHECKPOINT\":       SignalCheckpoint,\n}\n\n// ParseSignals extracts signal from agent output\n// Format: \u003cpromise\u003eSIGNAL_TYPE: context\u003c/promise\u003e\nfunc ParseSignals(output string) (Signal, string) {\n    re := regexp.MustCompile(`\u003cpromise\u003e(\\w+)(?::\\s*(.+?))?\u003c/promise\u003e`)\n    matches := re.FindStringSubmatch(output)\n    if matches == nil {\n        return SignalNone, \"\"\n    }\n    \n    signalStr := matches[1]\n    context := strings.TrimSpace(matches[2])\n    \n    if signal, ok := signalPatterns[signalStr]; ok {\n        return signal, context\n    }\n    return SignalNone, \"\"\n}\n```\n\nAcceptance criteria:\n- [ ] All 8 signal types detected correctly\n- [ ] Context/reason extracted after colon\n- [ ] Unknown signals return SignalNone\n- [ ] Regex handles signals with/without context",
  "status": "open",
  "priority": 0,
  "type": "task",
  "owner": "peter@engelbrecht.dk",
  "blocked_by": [
    "mpt",
    "ux4"
  ],
  "parent": "eso",
  "created_by": "peter@engelbrecht.dk",
  "created_at": "2026-01-14T16:13:46.674435Z",
  "updated_at": "2026-01-14T16:13:57.752821Z"
}