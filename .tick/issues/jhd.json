{
  "id": "jhd",
  "title": "Add TUI conflict notification display",
  "description": "Display merge conflict notifications in the TUI when conflicts occur.\n\n## Overview\n\nWhen a merge conflict occurs, the TUI should clearly show the conflict and guide the user to resolve it manually.\n\n## Display Options\n\n### Option 1: Tab Status + Overlay (Recommended)\n\n1. Tab turns yellow/warning color with ⚠ icon\n2. Selecting that tab shows conflict overlay:\n\n```\n┌─[1:epic1]─[2:⚠epic2]─[3:epic3]───────────────────────────────┐\n│                                                               │\n│  ┌─────────────────────────────────────────────────────────┐  │\n│  │                  ⚠ Merge Conflict                       │  │\n│  │                                                         │  │\n│  │  Epic epic2 completed but cannot merge to main.         │  │\n│  │                                                         │  │\n│  │  Conflicting files:                                     │  │\n│  │    • src/engine/engine.go                               │  │\n│  │    • internal/tui/model.go                              │  │\n│  │                                                         │  │\n│  │  To resolve:                                            │  │\n│  │    1. cd /path/to/repo                                  │  │\n│  │    2. git checkout main                                 │  │\n│  │    3. git merge ticker/epic2                            │  │\n│  │    4. Resolve conflicts and commit                      │  │\n│  │                                                         │  │\n│  │  Worktree preserved at: .worktrees/epic2/               │  │\n│  │                                                         │  │\n│  │  Press 'd' to dismiss, 'r' to retry merge               │  │\n│  └─────────────────────────────────────────────────────────┘  │\n│                                                               │\n└───────────────────────────────────────────────────────────────┘\n```\n\n## Files to Modify\n\n### internal/tui/model.go\n\nAdd conflict state:\n\n```go\ntype Model struct {\n    // ... existing fields ...\n    \n    conflicts map[string]*ConflictDisplay // EpicID -\u003e conflict info\n}\n\ntype ConflictDisplay struct {\n    EpicID        string\n    Files         []string\n    WorktreePath  string\n    Instructions  []string\n    ShowOverlay   bool  // True when user is viewing this conflict\n}\n```\n\n### New Messages\n\n```go\n// ConflictDetectedMsg signals a merge conflict occurred.\ntype ConflictDetectedMsg struct {\n    EpicID       string\n    Files        []string\n    WorktreePath string\n}\n\n// ConflictResolvedMsg signals conflict was manually resolved.\ntype ConflictResolvedMsg struct {\n    EpicID string\n}\n```\n\n## Key Bindings (when viewing conflict tab)\n\n| Key | Action |\n|-----|--------|\n| d | Dismiss overlay (keep conflict unresolved) |\n| r | Retry merge (check if resolved) |\n| Esc | Dismiss overlay |\n\n## Implementation Notes\n\n- Conflict overlay similar to completion overlay\n- Generate resolution instructions dynamically\n- Include absolute repo path in instructions\n- 'r' retry calls ConflictHandler.CheckResolved()\n- If resolved: cleanup worktree, update tab to completed\n- Keep conflict state until resolved (survives tab switches)\n\n### internal/tui/conflict.go\n- Conflict overlay rendering\n- Instruction generation\n\n### internal/tui/model_test.go\n- Test ConflictDetectedMsg shows in tab\n- Test overlay display\n- Test retry merge flow\n- Test conflict resolved cleanup",
  "notes": "2026-01-13 09:48 - Work on this task was interrupted by user. May be partially complete.",
  "status": "in_progress",
  "priority": 2,
  "type": "task",
  "owner": "peter@engelbrecht.dk",
  "blocked_by": [
    "kdq",
    "mm6"
  ],
  "parent": "8my",
  "acceptance_criteria": "1. Tab shows warning icon when epic has conflict\n2. Selecting conflict tab shows conflict overlay\n3. Overlay lists all conflicting files\n4. Overlay shows clear resolution instructions with repo path\n5. 'd' dismisses overlay without resolving\n6. 'r' retries merge and cleans up if resolved\n7. Resolved conflicts update tab to completed\n8. Conflict state persists across tab switches\n9. All tests pass",
  "created_by": "peter@engelbrecht.dk",
  "created_at": "2026-01-12T10:03:24.947551Z",
  "updated_at": "2026-01-13T08:48:56.136985Z"
}