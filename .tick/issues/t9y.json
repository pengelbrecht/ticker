{
  "id": "t9y",
  "title": "Implement signal to awaiting mapping in engine",
  "description": "Add handleSignal method to internal/engine/engine.go that maps signals to awaiting states:\n\n```go\n// signalToAwaiting maps signals to their corresponding awaiting states\nvar signalToAwaiting = map[Signal]string{\n    SignalEject:           \"work\",\n    SignalBlocked:         \"input\",  // Legacy\n    SignalApprovalNeeded:  \"approval\",\n    SignalInputNeeded:     \"input\",\n    SignalReviewRequested: \"review\",\n    SignalContentReview:   \"content\",\n    SignalEscalate:        \"escalation\",\n    SignalCheckpoint:      \"checkpoint\",\n}\n\nfunc (e *Engine) handleSignal(task *ticks.Task, signal Signal, context string) error {\n    switch signal {\n    case SignalComplete:\n        // Check for pre-declared approval gate\n        if task.Requires != \"\" {\n            return e.ticks.SetAwaiting(task.ID, task.Requires, \"Work complete, requires \"+task.Requires)\n        }\n        return e.ticks.CloseTask(task.ID, \"Completed by agent\")\n        \n    default:\n        if awaiting, ok := signalToAwaiting[signal]; ok {\n            return e.ticks.SetAwaiting(task.ID, awaiting, context)\n        }\n    }\n    return nil\n}\n```\n\nAcceptance criteria:\n- [ ] All signals mapped to correct awaiting states\n- [ ] COMPLETE checks requires field before closing\n- [ ] Context passed to SetAwaiting as note\n- [ ] Unknown signals handled gracefully",
  "status": "closed",
  "priority": 0,
  "type": "task",
  "owner": "peter@engelbrecht.dk",
  "blocked_by": [
    "tps"
  ],
  "parent": "eso",
  "created_by": "peter@engelbrecht.dk",
  "created_at": "2026-01-14T16:13:58.840247Z",
  "updated_at": "2026-01-14T17:37:45.965084Z",
  "closed_at": "2026-01-14T17:37:45.965084Z",
  "closed_reason": "Added signalToAwaiting map and handleSignal method to engine.go. Maps all 8 handoff signals to awaiting states (eject→work, blocked→input, approval_needed→approval, etc). COMPLETE signal checks task.Requires before closing. Context passed to SetAwaiting as note. Unknown signals return nil gracefully. Added tests for map completeness and requires field logic."
}