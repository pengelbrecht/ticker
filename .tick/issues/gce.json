{
  "id": "gce",
  "title": "Implement project type auto-detection",
  "description": "Implement automatic detection of project type and verification commands based on project files.\n\n## Files to Create\n\n### internal/verify/detect.go\n\n```go\n// ProjectType represents a detected project type.\ntype ProjectType string\n\nconst (\n    ProjectGo     ProjectType = \"go\"\n    ProjectNode   ProjectType = \"node\"\n    ProjectPython ProjectType = \"python\"\n    ProjectRust   ProjectType = \"rust\"\n    ProjectMake   ProjectType = \"make\"\n    ProjectUnknown ProjectType = \"unknown\"\n)\n\n// DetectedConfig contains auto-detected verification commands.\ntype DetectedConfig struct {\n    ProjectType  ProjectType\n    TestCommand  string\n    BuildCommand string\n}\n\n// DetectProject examines the directory and returns detected commands.\n// Checks in priority order: go.mod, package.json, pyproject.toml, Cargo.toml, Makefile.\n// Returns ProjectUnknown with empty commands if nothing detected.\nfunc DetectProject(dir string) (*DetectedConfig, error)\n```\n\n## Detection Rules\n\n| File | Type | Test Command | Build Command |\n|------|------|--------------|---------------|\n| go.mod | go | go test ./... | go build ./... |\n| package.json (has \"test\" script) | node | npm test | npm run build (if exists) |\n| pyproject.toml or setup.py | python | pytest | python -m build (if pyproject) |\n| Cargo.toml | rust | cargo test | cargo build |\n| Makefile (has \"test\" target) | make | make test | make build (if exists) |\n\n## Implementation Notes\n\n- Check file existence with os.Stat\n- For package.json/Makefile, parse to check for scripts/targets\n- Return first match (priority order above)\n- Don't run any commands, just detect\n- For Node, check if \"test\" script exists in package.json (not just \"echo Error\")\n\n### internal/verify/detect_test.go\n- Test each project type detection\n- Test priority (go.mod wins over package.json if both exist)\n- Test unknown project returns empty commands\n- Use temporary directories with test files",
  "status": "closed",
  "priority": 2,
  "type": "task",
  "owner": "peter@engelbrecht.dk",
  "blocked_by": [
    "3nt"
  ],
  "parent": "t99",
  "acceptance_criteria": "1. DetectProject correctly identifies Go projects (go.mod present)\n2. DetectProject correctly identifies Node projects with real test scripts\n3. DetectProject correctly identifies Python projects\n4. DetectProject correctly identifies Rust projects\n5. DetectProject correctly identifies Make projects with test target\n6. Priority order is respected (Go \u003e Node \u003e Python \u003e Rust \u003e Make)\n7. Unknown projects return ProjectUnknown with empty commands\n8. All unit tests pass with temp directory fixtures",
  "created_by": "peter@engelbrecht.dk",
  "created_at": "2026-01-12T09:00:06.877354Z",
  "updated_at": "2026-01-12T09:01:55.235826Z",
  "closed_at": "2026-01-12T09:01:55.235826Z"
}