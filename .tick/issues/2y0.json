{
  "id": "2y0",
  "title": "Wire StreamParser to TUI message system",
  "description": "Connect StreamParser to TUI via tea.Cmd. The onUpdate callback from StreamParser should send TUI messages (AgentTextMsg, etc.) through a channel that gets converted to tea.Cmd. This enables real-time TUI updates as the agent streams output.",
  "status": "closed",
  "priority": 1,
  "type": "task",
  "owner": "peter@engelbrecht.dk",
  "blocked_by": [
    "dxe",
    "ixw"
  ],
  "parent": "n26",
  "created_by": "peter@engelbrecht.dk",
  "created_at": "2026-01-11T20:42:53.275795Z",
  "updated_at": "2026-01-11T22:00:17.032613Z",
  "closed_at": "2026-01-11T22:00:17.032613Z",
  "closed_reason": "Connected StreamParser to TUI via OnAgentState callback in engine. Added local metrics tracking fields (liveInputTokens, liveOutputTokens, liveCacheReadTokens, liveCacheCreationTokens, liveModel) to Model struct. AgentMetricsMsg now includes Model field. Engine.OnAgentState converts snapshots to delta-based TUI messages (AgentTextMsg, AgentThinkingMsg, AgentToolStartMsg/EndMsg, AgentMetricsMsg, AgentStatusMsg). Status bar rendering updated to use local live metrics. Tests updated to use new fields."
}