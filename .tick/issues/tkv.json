{
  "id": "tkv",
  "title": "Add integration tests for streaming pipeline",
  "description": "Add integration tests that verify the full streaming pipeline: ClaudeAgent with stream-json -\u003e StreamParser -\u003e TUI messages -\u003e Model updates. Use mock or real claude invocations to verify thinking, output, tool use, and metrics all flow correctly to TUI state.",
  "status": "closed",
  "priority": 2,
  "type": "task",
  "owner": "peter@engelbrecht.dk",
  "blocked_by": [
    "2y0"
  ],
  "parent": "n26",
  "created_by": "peter@engelbrecht.dk",
  "created_at": "2026-01-11T20:43:07.040449Z",
  "updated_at": "2026-01-11T22:14:49.159588Z",
  "closed_at": "2026-01-11T22:14:49.159588Z",
  "closed_reason": "Added comprehensive integration tests for streaming pipeline. Fixed type assertion issues in existing test file (streaming_integration_test.go) where Model.Update() was not using the applyMsg helper. Tests cover: basic text flow, thinking/output separation, single and multiple tool use, metrics flow, status transitions, error flow, iteration reset, RunRecord generation, and full end-to-end pipeline. All 10 tests pass."
}